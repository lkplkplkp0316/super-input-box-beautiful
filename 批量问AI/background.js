var e,r;function a(e){e?(chrome.action.setBadgeBackgroundColor({color:"#4D80FF"}),chrome.action.setIcon({path:"/images/dark.png"})):(chrome.action.setBadgeBackgroundColor({color:"#0D53FF"}),chrome.action.setIcon({path:"/images/light.png"}))}chrome.runtime.onInstalled.addListener((async()=>{var e;chrome.declarativeNetRequest.updateDynamicRules({addRules:[{id:2,priority:1,action:{type:"modifyHeaders",responseHeaders:[{header:"x-frame-options",operation:"remove"},{header:"frame-options",operation:"remove"},{header:"content-security-policy",operation:"remove"},{header:"content-security-policy-report-only",operation:"remove"}]},condition:{urlFilter:"*",resourceTypes:["main_frame","sub_frame"]}}],removeRuleIds:[2]},(()=>{chrome.runtime.lastError})),(null==(e=chrome.userTrackPrivate)?void 0:e.custom)&&chrome.userTrackPrivate.custom("page_ucbrowser_ai","plugin_ai_install_success",{spm:"ucbrowser.ai.plugin_ai.install_success"})})),chrome.runtime.onMessage.addListener(((e,r,a)=>{var o,i,t,c;const n=r.tab?r.tab.id:null;if("sendSearchMessage"===e.action)chrome.tabs.sendMessage(n,e,(function(e){chrome.runtime.lastError}));else if("trackUTEvent"===e.action){const{eventId:r,pageName:a,eventType:i,arg1:t,arg2:c,args:n}=e.data;(null==(o=chrome.userTrackPrivate)?void 0:o.originalEvent)&&chrome.userTrackPrivate.originalEvent(r,a,i,t,c,n)}else if("pageAppear"===e.action){const{pageId:r,pageName:a}=e.data;(null==(i=chrome.userTrackPrivate)?void 0:i.pageAppear)&&chrome.userTrackPrivate.pageAppear(r,a,(function(e){}))}else if("pageDisappear"===e.action){const{pageId:r}=e.data;(null==(t=chrome.userTrackPrivate)?void 0:t.pageDisappear)&&chrome.userTrackPrivate.pageDisappear(r,(function(e){}))}else if("udpatePageProps"===e.action){const{pageId:r,args:a}=e.data;(null==(c=chrome.userTrackPrivate)?void 0:c.updatePageProps)&&chrome.userTrackPrivate.updatePageProps(r,a,(function(e){}))}return!0})),chrome.action.onClicked.addListener((e=>{var r;const a=chrome.runtime.getURL("index.html");chrome.tabs.create({url:a}),(null==(r=chrome.userTrackPrivate)?void 0:r.click)&&chrome.userTrackPrivate.click("plugin_ai_click","page_ucbrowser_ai",{spm:"ucbrowser.ai.plugin_ai.click"})})),null==(e=chrome.uiHelperPrivate)||e.shouldUseDarkColors().then((e=>{a(e.data.isDarkTheme)})),null==(r=chrome.uiHelperPrivate)||r.onNativeThemeChanged.addListener((e=>{a(e)}));
